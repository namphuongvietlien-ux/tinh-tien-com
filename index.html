<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>T√≠nh Ti·ªÅn C∆°m Tr∆∞a</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">

        <div class="card week-picker">
            <h2>üóìÔ∏è Ch·ªçn Tu·∫ßn</h2>
            <p>D·ªØ li·ªáu ƒë∆∞·ª£c t·ª± ƒë·ªông l∆∞u theo tu·∫ßn.</p>
            <select id="weekPicker" onchange="handleWeekChange()"></select>
            <p id="weekNotice" class="week-notice"></p>
        </div>

        <h1>üìù Qu·∫£n L√Ω Ti·ªÅn C∆°m Tr∆∞a</h1>

        <div class="card" id="addPersonCard">
            <h2>üë§ Th√™m ng∆∞·ªùi (cho tu·∫ßn n√†y)</h2>
            <div class="form-group">
                <input type="text" id="personName" placeholder="Nh·∫≠p t√™n th√†nh vi√™n">
                <button onclick="addPerson()">Th√™m</button>
            </div>
            <h3>Danh s√°ch th√†nh vi√™n (tu·∫ßn n√†y):</h3>
            <ul id="peopleList"></ul>
        </div>

        <div class="card" id="addMealCard">
            <h2>üçõ Th√™m m√≥n ƒÉn (cho tu·∫ßn n√†y)</h2>
            <div class="form-group">
                <select id="daySelect">
                    <option value="Th·ª© 2">Th·ª© 2</option>
                    <option value="Th·ª© 3">Th·ª© 3</option>
                    <option value="Th·ª© 4">Th·ª© 4</option>
                    <option value="Th·ª© 5">Th·ª© 5</option>
                    <option value="Th·ª© 6">Th·ª© 6</option>
                    <option value="Th·ª© 7">Th·ª© 7</option>
                    <option value="Ch·ªß nh·∫≠t">Ch·ªß nh·∫≠t</option>
                </select>
                <select id="personSelect">
                    <option value="">-- Ch·ªçn ng∆∞·ªùi --</option>
                </select>
                <input type="text" id="foodItem" placeholder="T√™n m√≥n ƒÉn">
            </div>
            
            <div class="form-group-price">
                <input type="number" id="foodPrice" placeholder="Gi√° ti·ªÅn (VNƒê)">
                <div class="price-presets">
                    <button onclick="setPrice(20000)">20k</button>
                    <button onclick="setPrice(25000)">25k</button>
                    <button onclick="setPrice(45000)">45k</button>
                    <button onclick="setPrice(50000)">50k</button>
                    <button onclick="setPrice(55000)">55k</button>
                    <button onclick="setPrice(60000)">60k</button>
                    <button onclick="setPrice(65000)">65k</button>
                </div>
            </div>

            <div class="form-group">
                <button onclick="addFood()" class="add-food-btn">Th√™m m√≥n</button>
            </div>
        </div>

        <div class="card">
            <h2>üìÖ Chi ti√™u theo ng√†y</h2>
            <div id="daily-expenses"></div>
        </div>

        <div class="card summary">
            <h2>üìä T·ªïng k·∫øt tu·∫ßn</h2>
            <table id="summaryTable">
                <thead>
                    <tr>
                        <th>‚úîÔ∏è</th> 
                        <th>üßë T√™n</th>
                        <th>üç± S·ªë su·∫•t</th>
                        <th>üíµ T·ªïng ti·ªÅn (VNƒê)</th>
                    </tr>
                </thead>
                <tbody></tbody>
            </table>
            <p id="grandTotal" class="grand-total">T·ªïng chi ph√≠ c·∫£ tu·∫ßn: 0 VNƒê</p>
        </div>
        
        <div class="card qr-payment">
            <h2>üí∞ Thanh to√°n</h2>
            <p>Tick ch·ªçn 1 ng∆∞·ªùi ho·∫∑c nh·∫•n n√∫t d∆∞·ªõi ƒë√¢y ƒë·ªÉ t·∫°o QR:</p>
            
            <button onclick="generateTotalWeekQR()" class="qr-total-btn">T·∫°o QR theo T·ªïng Tu·∫ßn</button>
            
            <img 
                id="qrPaymentImage"
                src="" 
                alt="Qu√©t m√£ QR ƒë·ªÉ thanh to√°n" 
                width="250" 
                style="display: block; margin: 15px auto 0;"
            >
        </div>

        <button id="manageDataBtn" onclick="clearCurrentWeekData()">üóëÔ∏è X√≥a d·ªØ li·ªáu tu·∫ßn n√†y</button>
    </div>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>
    <script src="script.js"></script>
</body>
</html>

